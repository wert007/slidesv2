<html>

<head>
    <style>
        * {
            position: relative;
            box-sizing: border-box;
        }
        
        body {
            width: 100vw;
            height: 100vh;
            margin: 0;
        }
    </style>
</head>

<body>
    <video id=vid controls>
        <source
            src="https://ia801001.us.archive.org/3/items/twitch-vod-v465368646/DANCE_SUBS_GET_SNAPCHAT-v465368646.ogv" />
    </video>
    <p id=state>...</p>
    <script>
        let vid = document.getElementById('vid');
        let state = document.getElementById('state');
        vid.muted = true;
        vid.play();
        setInterval(() => {
            state.innerText = "" + (vid.paused || vid.ended);
        }, 20);
    </script>

    <!-- 

        Video:
            slideId: int
            stepNumericalId: int
            keepPlaying: bool
            autoPaused: bool

            fn isPaused() -> !paused
            fn pause()
            fn play()

        YTVideo:
            fn isPaused() -> getPlayerState() != YT.PlayerState.Paused
            fn pause() -> pauseVideo()
            fn play() -> playVideo()

            if (ytPlayers === undefined)
        return;

        
    var actualNumericalId = parseInt(currentSteps[currentSteps.length - 1].dataset.stepNumericalId);
    
    for (let p of ytPlayers) {
        if ((currentSlide.id !== p.slideId || p.stepNumericalId > actualNumericalId)
             && !p.keepPlaying) {
            p.autoPaused = p.getPlayerState() != YT.PlayerState.PAUSED
            p.pauseVideo();
        }
        else if (p.getPlayerState() == YT.PlayerState.PAUSED && p.autoPaused)
            p.playVideo();
    }
     -->
</body>

</html>